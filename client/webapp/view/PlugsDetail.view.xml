<mvc:View 
   xmlns:mvc="sap.ui.core.mvc"
   xmlns:uxap="sap.uxap"
   xmlns:layout="sap.ui.layout"
   xmlns="sap.m"
   controllerName="com.perezjquim.energysim.client.controller.PlugsDetail">
   <uxap:ObjectPageLayout>
      <uxap:headerContent>
         <uxap:ObjectPageHeaderContent class="z_objectpageheadercontent">
            <uxap:content>
               <Avatar src="sap-icon://connected" displaySize="M" backgroundColor="Accent8"/>
               <Title text="{i18n>plug_id}{ws_data>id}"/>
               <layout:VerticalLayout>
                  <Label text="{i18n>plug_status}"/>                  
                  <Switch 
                     state="{= ${ws_data>status} === 'enabled' }"
                     change="onTogglePlugStatus"/>
               </layout:VerticalLayout>
               <layout:VerticalLayout>
                  <Label text="{i18n>plug_plugged_car_id}"/>
                  <Link 
                     text="{ws_data>plugged_car_id}"
                     enabled="{= !!${ws_data>plugged_car_id} }"
                     href="{ parts: [ 'ws_data>plugged_car_id' ], formatter: '.formatCarHref' }"/>
               </layout:VerticalLayout>               
               <layout:VerticalLayout>
                  <Label text="{i18n>plug_energy_consumption}"/>
                  <Text 
                     text="{ws_data>energy_consumption} KW"/>
               </layout:VerticalLayout>
            </uxap:content>
         </uxap:ObjectPageHeaderContent>
      </uxap:headerContent>
      <uxap:sections>
         <uxap:ObjectPageSection titleUppercase="false" title="{i18n>ChargingPeriods}">
            <uxap:subSections>
               <uxap:ObjectPageSubSection>
                  <uxap:blocks>
                     <Table 
                        items="{ws_data>charging_periods}"
                        fixedLayout="false">
                        <columns>
                           <Column>
                              <Text 
                                 text="{i18n>charging_period_id}" />
                           </Column>
                            <Column>
                                <Text 
                                    text="{i18n>car_id}" />
                            </Column>                                           
                           <Column>
                              <Text 
                                 text="{i18n>event_start_datetime}" />
                           </Column>
                           <Column>
                              <Text 
                                 text="{i18n>event_end_datetime}" />
                           </Column>
                        </columns>
                        <items>
                           <ColumnListItem>
                              <cells>
                                 <Text 
                                    text="{ws_data>id}"/>
                                 <Link 
                                     text="{ws_data>car_id}"
                                     enabled="{= !!${ws_data>car_id} }"
                                     href="{ parts: [ 'ws_data>car_id' ], formatter: '.formatCarHref' }"/>                                               
                                 <Text 
                                    text="{ parts: [ 'ws_data>start_datetime' ], formatter: '.formatEventDatetime' }"/>
                                 <Text 
                                    text="{ parts: [ 'ws_data>end_datetime' ], formatter: '.formatEventDatetime' }"/>
                              </cells>
                           </ColumnListItem>
                        </items>
                     </Table>
                  </uxap:blocks>
               </uxap:ObjectPageSubSection>
            </uxap:subSections>
         </uxap:ObjectPageSection>
      </uxap:sections>
   </uxap:ObjectPageLayout>
</mvc:View>