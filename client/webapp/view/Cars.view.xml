<mvc:View 
    controllerName="com.perezjquim.energysim.client.controller.Cars"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    xmlns:l="sap.ui.layout"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:stats="com.perezjquim.energysim.client.controller.util.stats">
    <Page 
    	title="{i18n>Cars}">
        <Table 
        	items="{ws_data>/cars}"
            fixedLayout="false">
            <columns>
                <Column>
                    <Text 
                    	text="{i18n>car_id}" />
                </Column>
                <Column>
                    <Text 
                    	text="{i18n>car_status}" />
                </Column>
                <Column>
                    <Text 
                    	text="{i18n>car_battery_level}" />
                </Column>
                <Column>
                    <Text 
                    	text="{i18n>car_plug_consumption}" />
                </Column>
            </columns>
            <items>
                <ColumnListItem>
                    <cells>
                        <Text 
                        	text="{ws_data>id}"/>
                        <ObjectStatus
				            text="{ parts: [ 'ws_data>status' ], formatter: '.formatCarStatusText' }"
				            icon="{ parts: [ 'ws_data>status' ], formatter: '.formatCarStatusIcon' }"
				            state="{ parts: [ 'ws_data>status' ], formatter: '.formatCarStatus' }" />
                        <ProgressIndicator
                            percentValue="{= ( ${ws_data>battery_level} / 10 ) * 100 }"
                            displayValue="{ parts: [ 'ws_data>battery_level' ], formatter: '.formatBatteryLevelText' }"
                            state="{ parts: [ 'ws_data>battery_level' ], formatter: '.formatBatteryLevelState' }"
                            showValue="true" />
                        <Text 
                        	text="{ws_data>plug_consumption}"/>
                    </cells>
                </ColumnListItem>
            </items>
        </Table>
        <stats:GoogleChart 
            chartData="{
                'columns' : [ { 'type': 'date', 'label': 'Date' }, { 'type': 'number', 'label': 'Car #1' }, { 'type' : 'number', 'label' : 'Car #2' } ],
                'rows' : [ [ '2020-01-01T00:00:00', 10, 9 ], [ '2020-01-01T01:00:00', 5, 8 ], [ '2020-01-01T02:00:00', 3, 11 ] ]
            }"
            chartTitle="{i18n>cars_stats_battery_linechart}"
            chartOptions="{             
                width: 400,
                height: 300  
            }"
            chartType="LineChart"/>
    </Page>
</mvc:View>